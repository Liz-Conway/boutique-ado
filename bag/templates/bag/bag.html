{% extends "base.html" %}
{% load static %}

{% block extra_title %}Bag{% endblock %}
{% block page_header %}
	<div class="headerContainer">
		
	</div>
{% endblock %}

{% block content %}
	<div class="overlay"></div>
	<div class="containerBag">
		<hr>
		<h2 class="bagTitle">Shopping Bag</h2>
		<hr>
		<div class="bagItems">
			{% if bag_items %}
				<div class="tableRoundedResponsive">
					<table class="tableBag">
						<thead>
							<th scope="col">Product Info</th>
							<th scope="col"></th>
							<th scope="col">Price</th>
							<th scope="col">Quantity</th>
							<th scope="col">Subtotal</th>
						</thead>
						<tbody>
							{% for item in bag_items %}
								<tr>
									<td>
										<img src="{{ item.product.image_url }}">
									</td>
									<td>
										<p><strong>{{ item.product.name }}</strong></p>
										<p>SKU :  {{ item.product.sku|upper }}</p>
									</td>
									<td>
										<p>€{{ item.product.price }}</p>
									</td>
									<td>
										<p>{{ item.quantity }}</p>
									</td>
									<td>
										<p>€{{ item.product.price }}</p>
									</td>
								</tr>
							{% endfor %}
							<tr class="tableBagTotals">
								<td colspan="5">
									<h5><strong>Bag Total :  €{{ grand_total|floatformat:2 }}</strong></h5>
									<h6>Delivery :  €{{ delivery|floatformat:2 }}</h6>
									<h4><strong>Grand Total :  €{{ grand_total|floatformat:2 }}</strong></h4>
									{% if free_delivery_delta > 0 %}
										<p>
											You could get free delivery by spending just <strong>€{{ free_delivery_delta }}</strong> more!
										</p>
									{% endif %}
								</td>
							</tr>
							<tr class="tableBagTotals">
								<td colspan="5" >
									<a href="{% url 'products' %}" class="btnShopping">
										<span class="icon">
											<i class="fas fa-chevron-left"></i>
										</span>
										Keep Shopping
									</a>
									<a href="" class="btnShoppingInverse">
										Secure Checkout
										<span class="icon">
											<i class="fas fa-lock"></i>
										</span>
									</a>
								</td>
							</tr>
						</tbody>
					</table>
				</div>
			{% else %}
				<p>Your bag is empty.</p>
				<a href="{% url 'products' %}" class="keepShoppingButton">
					<span class="icon">
						<i class="fas fa-chevron-left"></i>
					</span>
					Keep Shopping
				</a>
			{% endif %}
		</div>
	</div>
{% endblock %}